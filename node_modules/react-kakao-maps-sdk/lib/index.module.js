import n,{useLayoutEffect as e,useEffect as o,useState as t,useRef as r,useImperativeHandle as i,useContext as a,useMemo as l}from"react";import s from"react-dom";function u(){return u=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(n[t]=o[t])}return n},u.apply(this,arguments)}function c(n,e){return c=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},c(n,e)}function d(n,e){if(null==n)return{};var o,t,r={},i=Object.keys(n);for(t=0;t<i.length;t++)e.indexOf(o=i[t])>=0||(r[o]=n[o]);return r}var p,f="undefined"!=typeof window&&"undefined"!=typeof document?e:o,k=function(n,e,o){f(function(){if(n&&o){var t=function(){var e=[].slice.call(arguments);return void 0===e?o(n):o.apply(void 0,[n].concat(e))};return kakao.maps.event.addListener(n,e,t),function(){kakao.maps.event.removeListener(n,e,t)}}},[n,e,o])};!function(n){n[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE"}(p||(p={}));var m=/*#__PURE__*/function(){function n(e){var o=e.appkey,t=e.id,r=void 0===t?"__reactKakaoMapsSdkloaderId":t,i=e.libraries,a=void 0===i?[]:i,l=e.nonce,s=e.retries,u=void 0===s?3:s,c=e.url,d=void 0===c?"//dapi.kakao.com/v2/maps/sdk.js":c;if(this.id=void 0,this.appkey=void 0,this.url=void 0,this.libraries=void 0,this.nonce=void 0,this.retries=void 0,this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=void 0,this.id=r,this.appkey=o,this.libraries=a,this.nonce=l,this.retries=u,this.url=d,n.instance){if(!n.equalOptions(this.options,n.instance.options))throw new Error("Loader must not be called again with different options. "+JSON.stringify(this.options)+" !== "+JSON.stringify(n.instance.options));return n.instance}n.instance=this}n.isLoaded=function(){return new Promise(function(e){return n.instance?n.instance.status===p.FAILURE||n.instance.status===p.INITIALIZED?e(!1):(n.instance.status===p.LOADING&&n.loadcheckcallbacks.push(function(n){return e(!n)}),e(!0)):window.kakao&&window.kakao.maps?0!==window.kakao.maps.readyState?e(!0):window.kakao.maps.load(function(){e(!0)}):n.loadcheckcallbacks.push(function(n){e(!n)})})};var e,o,t=n.prototype;return t.load=function(){var n=this;return new Promise(function(e,o){n.loadCallback(function(n){n?o(n.error):e(window.kakao)})})},t.loadCallback=function(n){this.callbacks.push(n),this.execute()},t.resetIfRetryingFailed=function(){this.failed&&this.reset()},t.reset=function(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=void 0},t.execute=function(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.kakao&&window.kakao.maps)return console.warn("Kakao Maps이 이미 외부 요소에 의해 로딩되어 있습니다.설정한 옵션과 일치 하지 않을 수 있으며, 이에 따른 예상치 동작이 발생할 수 있습니다."),void this.callback();this.loading||(this.loading=!0,this.setScript())}},t.setScript=function(){document.getElementById(this.id)&&this.callback();var n=this.createUrl(),e=document.createElement("script");e.id=this.id,e.type="text/javascript",e.src=n,e.onerror=this.loadErrorCallback.bind(this),e.onload=this.callback.bind(this),e.defer=!0,e.async=!0,this.nonce&&(e.nonce=this.nonce),document.head.appendChild(e)},t.loadErrorCallback=function(n,e,o,t,r){var i=this;if(this.errors.push({event:n,source:e,lineno:o,colno:t,error:r}),this.errors.length<=this.retries){var a=this.errors.length*Math.pow(2,this.errors.length);console.log("Failed to load Kakao Maps script, retrying in "+a+" ms."),setTimeout(function(){i.deleteScript(),i.setScript()},a)}else this.onerrorEvent=this.errors[this.errors.length-1],this.callback()},t.createUrl=function(){var n=this.url;return n+="?appkey="+this.appkey,this.libraries.length&&(n+="&libraries="+this.libraries.join(",")),n+"&autoload=false"},t.deleteScript=function(){var n=document.getElementById(this.id);n&&n.remove()},t.callback=function(){var e=this;kakao.maps.load(function(){e.done=!0,e.loading=!1,e.callbacks.forEach(function(n){n(e.onerrorEvent)}),e.callbacks=[],n.loadcheckcallbacks.forEach(function(n){n(e.onerrorEvent)}),n.loadcheckcallbacks=[]})},n.equalOptions=function(n,e){if(n.appkey!==e.appkey)return!1;if(n.id!==e.id)return!1;if(n.libraries.length!==e.libraries.length)return!1;for(var o=0;o<n.libraries.length;++o)if(n.libraries[o]!==e.libraries[o])return!1;return n.nonce===e.nonce&&n.retries===e.retries&&n.url===e.url},e=n,(o=[{key:"options",get:function(){return{appkey:this.appkey,id:this.id,libraries:this.libraries,nonce:this.nonce,retries:this.retries,url:this.url}}},{key:"status",get:function(){return this.onerrorEvent?p.FAILURE:this.done?p.SUCCESS:this.loading?p.LOADING:p.INITIALIZED}},{key:"failed",get:function(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}}])&&function(n,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),n}();m.instance=void 0,m.loadcheckcallbacks=[];var g=["as","children","center","isPanto","padding","disableDoubleClick","disableDoubleClickZoom","draggable","zoomable","keyboardShortcuts","level","maxLevel","minLevel","mapTypeId","projectionId","scrollwheel","tileAnimation","onBoundsChanged","onCenterChanged","onClick","onDoubleClick","onDrag","onDragEnd","onDragStart","onIdle","onMaptypeidChanged","onMouseMove","onRightClick","onTileLoaded","onZoomChanged","onZoomStart","onCreate"],v=n.createContext(void 0),h=n.forwardRef(function(e,o){var a=e.as,l=e.children,s=e.center,c=e.isPanto,p=void 0!==c&&c,h=e.padding,w=void 0===h?32:h,y=e.disableDoubleClick,C=e.disableDoubleClickZoom,b=e.draggable,I=e.zoomable,O=e.keyboardShortcuts,M=e.level,L=e.maxLevel,x=e.minLevel,S=e.mapTypeId,z=e.projectionId,E=e.scrollwheel,P=e.tileAnimation,R=e.onBoundsChanged,A=e.onCenterChanged,D=e.onClick,T=e.onDoubleClick,Z=e.onDrag,W=e.onDragEnd,N=e.onDragStart,j=e.onIdle,_=e.onMaptypeidChanged,F=e.onMouseMove,G=e.onRightClick,U=e.onTileLoaded,V=e.onZoomChanged,B=e.onZoomStart,q=e.onCreate,H=d(e,g),J=a||"div",K=t(!1),X=K[0],Y=K[1],Q=t(),$=Q[0],nn=Q[1],en=r(null);return f(function(){m.isLoaded().then(Y)},[]),f(function(){if(X){var n=en.current;if(n){var e="lat"in s?new kakao.maps.LatLng(s.lat,s.lng):new kakao.maps.Coords(s.x,s.y),o=new kakao.maps.Map(n,{center:e,disableDoubleClick:y,disableDoubleClickZoom:C,draggable:b,keyboardShortcuts:O,level:M,mapTypeId:S,projectionId:z,scrollwheel:E,tileAnimation:P});return nn(o),function(){n.innerHTML=""}}}},[X,y,C,S,P]),i(o,function(){return $},[$]),f(function(){$&&q&&q($)},[$,q]),f(function(){if($){var n=$.getCenter();n instanceof kakao.maps.Coords&&(n=n.toLatLng());var e="lat"in s?new kakao.maps.LatLng(s.lat,s.lng):new kakao.maps.Coords(s.x,s.y);e instanceof kakao.maps.LatLng&&e.equals(n)||e instanceof kakao.maps.Coords&&e.toLatLng().equals(n)||(p?$.panTo(e,w):$.setCenter(e))}},[$,s.lat,s.lng,s.x,s.y]),f(function(){$&&void 0!==b&&$.setDraggable(b)},[$,b]),f(function(){$&&void 0!==I&&$.setZoomable(I)},[$,I]),f(function(){$&&O&&"boolean"==typeof O&&$.setKeyboardShortcuts(O)},[$,O]),f(function(){$&&M&&$.setLevel(M)},[$,M]),f(function(){$&&S&&$.setMapTypeId(S)},[$,S]),f(function(){$&&z&&$.setProjectionId(z)},[$,z]),f(function(){$&&L&&$.setMaxLevel(L)},[$,L]),f(function(){$&&x&&$.setMinLevel(x)},[$,x]),k($,"bounds_changed",R),k($,"center_changed",A),k($,"click",D),k($,"dblclick",T),k($,"drag",Z),k($,"dragstart",N),k($,"dragend",W),k($,"idle",j),k($,"maptypeid_changed",_),k($,"mousemove",F),k($,"rightclick",G),k($,"tilesloaded",U),k($,"zoom_changed",V),k($,"zoom_start",B),n.createElement(n.Fragment,null,n.createElement(J,u({},H,{ref:en})),$&&n.createElement(v.Provider,{value:$},l))}),w=function(n){var e=a(v);if(!e)throw new Error((n?n+" Component":"useMap")+" must exist inside Map Component!");return e},y=n.forwardRef(function(n,o){var t=n.map,a=n.position,u=n.marker,c=n.children,d=n.altitude,p=n.disableAutoPan,f=n.range,k=n.removable,m=n.zIndex,g=n.onCreate,v=r(document.createElement("div")),h=l(function(){var n=new kakao.maps.InfoWindow({altitude:d,disableAutoPan:p,range:f,removable:k,zIndex:m,content:v.current,position:a});return v.current.style.display="none",n},[p,k]);return i(o,function(){return h},[h]),e(function(){return h.open(t,u),function(){h.close()}},[t,u]),e(function(){g&&g(h)},[h,g]),e(function(){h&&h.setPosition(a)},[h,a]),e(function(){h&&d&&h.setAltitude(d)},[h,d]),e(function(){h&&f&&h.setRange(f)},[h,f]),e(function(){h&&m&&h.setZIndex(m)},[h,m]),v.current.parentElement&&s.createPortal(c,v.current.parentElement)}),C=n.createContext(void 0),b=n.forwardRef(function(o,t){var r=o.children,a=o.averageCenter,s=o.calculator,u=o.clickable,c=o.disableClickZoom,d=o.gridSize,p=o.hoverable,f=o.minClusterSize,m=o.minLevel,g=o.styles,v=o.texts,h=o.onClusterclick,y=o.onClusterdblclick,b=o.onClustered,I=o.onClusterout,O=o.onClusterover,M=o.onClusterrightclick,L=o.onCreate,x=w("MarkerClusterer"),S=l(function(){if(window.kakao.maps.MarkerClusterer)return new kakao.maps.MarkerClusterer({averageCenter:a,calculator:s,clickable:u,disableClickZoom:c,gridSize:d,hoverable:p,minClusterSize:f,minLevel:m,styles:g,texts:v});console.warn("clusterer 라이브러리를 별도 로드 해야 사용 가능합니다. `https://apis.map.kakao.com/web/guide/#loadlibrary`")},[]);return i(t,function(){return S},[S]),e(function(){null==S||S.setMap(x)},[x,S]),e(function(){S&&L&&L(S)},[S,L]),e(function(){S&&d&&(S.setGridSize(d),S.redraw())},[S,d]),e(function(){S&&f&&(S.setMinClusterSize(f),S.redraw())},[S,f]),e(function(){S&&void 0!==a&&(S.setAverageCenter(a),S.redraw())},[S,a]),e(function(){S&&m&&(S.setMinLevel(m),S.redraw())},[S,m]),e(function(){S&&v&&(S.setTexts(v),S.redraw())},[S,v]),e(function(){S&&s&&(S.setCalculator(s),S.redraw())},[S,s]),e(function(){S&&g&&(S.setStyles(g),S.redraw())},[S,g]),k(S,"clusterclick",h),k(S,"clusterover",O),k(S,"clusterout",I),k(S,"clusterdblclick",y),k(S,"clusterrightclick",M),k(S,"clustered",b),S?n.createElement(C.Provider,{value:S},r):null}),I=n.forwardRef(function(o,t){var r=o.map,s=o.position,u=o.children,c=o.altitude,d=o.clickable,p=o.draggable,f=o.image,m=o.infoWindowOptions,g=o.onCreate,v=o.onClick,h=o.onDragEnd,w=o.onDragStart,b=o.onMouseOut,I=o.onMouseOver,O=o.opacity,M=o.range,L=o.title,x=o.zIndex,S=a(C),z=l(function(){return new kakao.maps.Marker({altitude:c,clickable:d,draggable:p,image:f,opacity:O,range:M,title:L,zIndex:x,position:s})},[]);return i(t,function(){return z},[z]),e(function(){return S?S.addMarker(z):z.setMap(r),function(){S?S.removeMarker(z):z.setMap(null)}},[r,S,z]),e(function(){g&&g(z)},[z,g]),k(z,"click",v),k(z,"dragstart",w),k(z,"dragend",h),k(z,"mouseout",b),k(z,"mouseover",I),e(function(){r&&z&&s&&z.setPosition(s)},[r,z,s]),e(function(){r&&z&&f&&z.setImage(f)},[r,z,f]),e(function(){r&&z&&c&&z.setAltitude(c)},[r,z,c]),e(function(){r&&z&&void 0!==d&&z.setClickable(d)},[r,z,d]),e(function(){r&&z&&void 0!==p&&z.setDraggable(p)},[r,z,p]),e(function(){r&&z&&O&&z.setOpacity(O)},[r,z,O]),e(function(){r&&z&&M&&z.setRange(M)},[r,z,M]),e(function(){r&&z&&L&&z.setTitle(L)},[r,z,L]),e(function(){r&&z&&x&&z.setZIndex(x)},[r,z,x]),u?n.createElement(y,{position:s,map:r,marker:z,altitude:null==m?void 0:m.altitude,disableAutoPan:null==m?void 0:m.disableAutoPan,range:null==m?void 0:m.range,removable:null==m?void 0:m.removable,zIndex:null==m?void 0:m.zIndex},u):null}),O=n.forwardRef(function(e,o){var t=e.image,r=e.position,i=e.children,a=e.clickable,s=e.draggable,u=e.infoWindowOptions,c=e.onClick,d=e.onDragEnd,p=e.onDragStart,f=e.onMouseOut,k=e.onMouseOver,m=e.onCreate,g=e.opacity,v=e.title,h=e.zIndex,y=w("MapMarker"),C=l(function(){var n,e,o,r,i,a,l,s,u,c,d,p;return t&&new kakao.maps.MarkerImage(t.src,new kakao.maps.Size(t.size.width,t.size.height),{alt:null==(n=t.options)?void 0:n.alt,coords:null==(e=t.options)?void 0:e.coords,offset:(null==(o=t.options)?void 0:o.offset)&&new kakao.maps.Point(null==(r=t.options)?void 0:r.offset.x,null==(i=t.options)?void 0:i.offset.y),shape:null==(a=t.options)?void 0:a.shape,spriteOrigin:(null==(l=t.options)?void 0:l.spriteOrigin)&&new kakao.maps.Point(null==(s=t.options)?void 0:s.spriteOrigin.x,null==(u=t.options)?void 0:u.spriteOrigin.y),spriteSize:(null==(c=t.options)?void 0:c.spriteSize)&&new kakao.maps.Size(null==(d=t.options)?void 0:d.spriteSize.width,null==(p=t.options)?void 0:p.spriteSize.height)})},[t]),b=l(function(){return"lat"in r?new kakao.maps.LatLng(r.lat,r.lng):new kakao.maps.Coords(r.x,r.y).toLatLng()},[r.lat,r.lng,r.x,r.y]);return n.createElement(I,{map:y,position:b,image:C,clickable:a,draggable:s,infoWindowOptions:u,onClick:c,onDragEnd:d,onDragStart:p,onMouseOut:f,onMouseOver:k,onCreate:m,opacity:g,title:v,zIndex:h,ref:o},i)}),M=n.forwardRef(function(e,o){var t=e.position,r=e.children,i=e.disableAutoPan,a=e.removable,s=e.zIndex,u=e.onCreate,c=w("MapInfoWindow"),d=l(function(){return new kakao.maps.LatLng(t.lat,t.lng)},[t.lat,t.lng]);return n.createElement(y,{disableAutoPan:i,removable:a,zIndex:s,map:c,position:d,onCreate:u,ref:o},r)}),L=n.forwardRef(function(n,o){var t=n.position,u=n.children,c=n.clickable,d=n.xAnchor,p=n.yAnchor,f=n.zIndex,k=n.onCreate,m=a(C),g=w("CustomOverlayMap"),v=r(document.createElement("div")),h=l(function(){return new kakao.maps.LatLng(t.lat,t.lng)},[t.lat,t.lng]),y=l(function(){var n=new kakao.maps.CustomOverlay({clickable:c,xAnchor:d,yAnchor:p,zIndex:f,position:h,content:v.current});return v.current.style.display="none",n},[c,d,p]);return i(o,function(){return y},[y]),e(function(){if(g)return m?m.addMarker(y):y.setMap(g),function(){m?m.removeMarker(y):y.setMap(null)}},[g,m,y]),e(function(){k&&k(y)},[y,k]),e(function(){y.setPosition(h)},[y,h]),e(function(){f&&y.setZIndex(f)},[y,f]),v.current.parentElement&&s.createPortal(u,v.current.parentElement)}),x=n.forwardRef(function(n,o){var t=n.position,r=void 0===t?kakao.maps.ControlPosition.TOPRIGHT:t,a=w("MapTypeControl"),s=l(function(){return new kakao.maps.MapTypeControl},[]);return i(o,function(){return s},[s]),e(function(){return a.addControl(s,r),function(){a.removeControl(s)}},[a,s,r]),null}),S=n.forwardRef(function(n,e){var t=n.position,r=void 0===t?kakao.maps.ControlPosition.RIGHT:t,a=w("ZoomControl"),s=l(function(){return new kakao.maps.ZoomControl},[]);return i(e,function(){return s},[s]),o(function(){return a.addControl(s,r),function(){a.removeControl(s)}},[a,r]),null}),z=function(n){var e=n.type,t=w("MapTypeId");return o(function(){return t.addOverlayMapTypeId(e),function(){t.removeOverlayMapTypeId(e)}},[t,e]),null},E=n.forwardRef(function(n,o){var t=n.center,r=n.radius,a=n.fillColor,s=n.fillOpacity,u=n.strokeColor,c=n.strokeOpacity,d=n.strokeStyle,p=n.strokeWeight,f=n.zIndex,m=n.onMouseover,g=n.onMouseout,v=n.onMousemove,h=n.onMousedown,y=n.onClick,C=n.onCreate,b=w("Circle"),I=l(function(){return new kakao.maps.LatLng(t.lat,t.lng)},[t.lat,t.lng]),O=l(function(){return new kakao.maps.Circle({center:I,radius:r,fillColor:a,fillOpacity:s,strokeColor:u,strokeOpacity:c,strokeStyle:d,strokeWeight:p,zIndex:f})},[]);return i(o,function(){return O},[O]),e(function(){return O.setMap(b),function(){O.setMap(null)}},[b,O]),e(function(){C&&C(O)},[O,C]),e(function(){O&&O.setPosition(I)},[O,I]),e(function(){O.setRadius(r)},[O,r]),e(function(){f&&O.setZIndex(f)},[O,f]),e(function(){O.setOptions({fillColor:a,fillOpacity:s,strokeColor:u,strokeOpacity:c,strokeStyle:d,strokeWeight:p})},[O,a,s,u,c,d,p]),k(O,"mouseover",m),k(O,"mouseout",g),k(O,"mousemove",v),k(O,"mousedown",h),k(O,"click",y),null}),P=n.forwardRef(function(n,o){var t=n.path,r=n.endArrow,a=n.onClick,s=n.onMousedown,u=n.onMousemove,c=n.onMouseout,d=n.onMouseover,p=n.onCreate,f=n.strokeColor,m=n.strokeOpacity,g=n.strokeStyle,v=n.strokeWeight,h=n.zIndex,y=w("Polyline"),C=l(function(){return t.every(function(n){return n instanceof Array})?t.map(function(n){return n.map(function(n){return new kakao.maps.LatLng(n.lat,n.lng)})}):t.map(function(n){return new kakao.maps.LatLng(n.lat,n.lng)})},[t]),b=l(function(){return new kakao.maps.Polyline({path:C,endArrow:r,strokeColor:f,strokeOpacity:m,strokeStyle:g,strokeWeight:v,zIndex:h})},[]);return i(o,function(){return b},[b]),e(function(){return b.setMap(y),function(){return b.setMap(null)}},[y,b]),e(function(){p&&p(b)},[b,p]),e(function(){b.setOptions({endArrow:r,strokeColor:f,strokeOpacity:m,strokeStyle:g,strokeWeight:v})},[b,r,f,m,g,v]),e(function(){b.setPath(C)},[b,C]),e(function(){h&&b.setZIndex(h)},[b,h]),k(b,"mouseover",d),k(b,"mouseout",c),k(b,"mousemove",u),k(b,"mousedown",s),k(b,"click",a),null}),R=n.forwardRef(function(n,o){var t=n.path,r=n.onClick,a=n.onMousedown,s=n.onMousemove,u=n.onMouseout,c=n.onMouseover,d=n.onCreate,p=n.strokeColor,f=n.strokeOpacity,m=n.strokeStyle,g=n.strokeWeight,v=n.fillColor,h=n.fillOpacity,y=n.zIndex,C=w("Polygon"),b=l(function(){return t.every(function(n){return n instanceof Array})?t.map(function(n){return n.map(function(n){return new kakao.maps.LatLng(n.lat,n.lng)})}):t.map(function(n){return new kakao.maps.LatLng(n.lat,n.lng)})},[t]),I=l(function(){return new kakao.maps.Polygon({path:b,fillColor:v,fillOpacity:h,strokeColor:p,strokeOpacity:f,strokeStyle:m,strokeWeight:g,zIndex:y})},[]);return i(o,function(){return I},[I]),e(function(){return I.setMap(C),function(){return I.setMap(null)}},[C,I]),e(function(){d&&d(I)},[I,d]),e(function(){I.setOptions({fillColor:v,fillOpacity:h,strokeColor:p,strokeOpacity:f,strokeStyle:m,strokeWeight:g})},[I,v,h,p,f,m,g]),e(function(){I.setPath(b)},[I,b]),e(function(){y&&I.setZIndex(y)},[I,y]),k(I,"mouseover",c),k(I,"mouseout",u),k(I,"mousemove",s),k(I,"mousedown",a),k(I,"click",r),null}),A=n.forwardRef(function(n,o){var t=n.bounds,r=n.onClick,a=n.onMousedown,s=n.onMousemove,u=n.onMouseout,c=n.onMouseover,d=n.onCreate,p=n.strokeColor,f=n.strokeOpacity,m=n.strokeStyle,g=n.strokeWeight,v=n.fillColor,h=n.fillOpacity,y=n.zIndex,C=w("Rectangle"),b=l(function(){return new kakao.maps.LatLngBounds(new kakao.maps.LatLng(t.sw.lat,t.sw.lng),new kakao.maps.LatLng(t.ne.lat,t.ne.lng))},[t]),I=l(function(){return new kakao.maps.Rectangle({bounds:b,fillColor:v,fillOpacity:h,strokeColor:p,strokeOpacity:f,strokeStyle:m,strokeWeight:g,zIndex:y})},[]);return i(o,function(){return I},[I]),e(function(){return I.setMap(C),function(){return I.setMap(null)}},[C,I]),e(function(){d&&d(I)},[I,d]),e(function(){I.setOptions({fillColor:v,fillOpacity:h,strokeColor:p,strokeOpacity:f,strokeStyle:m,strokeWeight:g})},[I,v,h,p,f,m,g]),e(function(){I.setBounds(b)},[I,b]),e(function(){y&&I.setZIndex(y)},[I,y]),k(I,"mouseover",c),k(I,"mouseout",u),k(I,"mousemove",s),k(I,"mousedown",a),k(I,"click",r),null}),D=n.forwardRef(function(n,o){var t=n.center,r=n.rx,a=n.ry,s=n.fillColor,u=n.fillOpacity,c=n.strokeColor,d=n.strokeOpacity,p=n.strokeStyle,f=n.strokeWeight,m=n.zIndex,g=n.onMouseover,v=n.onMouseout,h=n.onMousemove,y=n.onMousedown,C=n.onClick,b=n.onCreate,I=w("Ellipse"),O=l(function(){return new kakao.maps.LatLng(t.lat,t.lng)},[t.lat,t.lng]),M=l(function(){return new kakao.maps.Ellipse({center:O,rx:r,ry:a,fillColor:s,fillOpacity:u,strokeColor:c,strokeOpacity:d,strokeStyle:p,strokeWeight:f,zIndex:m})},[]);return i(o,function(){return M},[M]),e(function(){return M.setMap(I),function(){M.setMap(null)}},[I,M]),e(function(){b&&b(M)},[M,b]),e(function(){M&&M.setPosition(O)},[M,O]),e(function(){M.setRadius(r,a)},[M,r,a]),e(function(){m&&M.setZIndex(m)},[M,m]),e(function(){M.setOptions({fillColor:s,fillOpacity:u,strokeColor:c,strokeOpacity:d,strokeStyle:p,strokeWeight:f})},[M,s,u,c,d,p,f]),k(M,"mouseover",g),k(M,"mouseout",v),k(M,"mousemove",h),k(M,"mousedown",y),k(M,"click",C),null}),T=n.forwardRef(function(n,o){var t=n.draw,r=n.onAdd,a=n.onRemove,s=n.onCreate,u=w(),d=l(function(){var n=/*#__PURE__*/function(n){var e,o;function t(e,o,t){var r;return(r=n.call(this)||this).draw=e,r.onAdd=o,r.onRemove=t,r}return o=n,(e=t).prototype=Object.create(o.prototype),e.prototype.constructor=e,c(e,o),t}(kakao.maps.AbstractOverlay);return new n(t,r,a)},[t,r,a]);return i(o,function(){return d},[d]),e(function(){return d.setMap(u),function(){d.setMap(null)}},[u,d]),e(function(){s&&s(d)},[d,s]),null}),Z=["as","children","position","pan","panoId","panoX","panoY","tilt","zoom","onCreate","onInit","onPanoidChange","onPositionChanged","onViewpointChange","onErrorGetNearestPanoId"],W=n.createContext(void 0),N=n.forwardRef(function(e,o){var a=e.as,l=e.children,s=e.position,c=e.pan,p=e.panoId,g=e.panoX,v=e.panoY,h=e.tilt,w=e.zoom,y=e.onCreate,C=e.onInit,b=e.onPanoidChange,I=e.onPositionChanged,O=e.onViewpointChange,M=e.onErrorGetNearestPanoId,L=d(e,Z),x=a||"div",S=t(!1),z=S[0],E=S[1],P=t(!0),R=P[0],A=P[1],D=t(),T=D[0],N=D[1],j=r(null);return f(function(){m.isLoaded().then(E)},[]),f(function(){if(z){var n=j.current;if(n){var e=new kakao.maps.Roadview(n,{pan:c,panoId:p,panoX:g,panoY:v,tilt:h,zoom:w});return N(e),function(){n.innerHTML=""}}}},[z,g,v,w]),i(o,function(){return T},[T]),f(function(){T&&y&&y(T)},[T,y]),f(function(){if(T&&!p&&(T.getPosition().getLat()!==s.lat||T.getPosition().getLng()!==s.lng)){var n=new kakao.maps.LatLng(s.lat,s.lng);(new kakao.maps.RoadviewClient).getNearestPanoId(n,s.radius,function(e){null===e&&M?M(T):T.setPanoId(e,n)})}},[T,p,s.lat,s.lng,s.radius,M]),f(function(){if(T&&p&&p!==T.getPanoId()&&(T.getPosition().getLat()!==s.lat||T.getPosition().getLng()!==s.lng)){var n=new kakao.maps.LatLng(s.lat,s.lng);T.setPanoId(p,n)}},[T,p,s.lat,s.lng]),f(function(){if(T){var n=T.getViewpoint();n.pan===c&&n.tilt===h||(c&&(n.pan=c),h&&(n.tilt=h),T.setViewpoint(n))}},[T,c,h]),k(T,"init",function(n){A(!1),C&&C(n)}),k(T,"panoid_changed",b),k(T,"viewpoint_changed",O),k(T,"position_changed",I),n.createElement(n.Fragment,null,n.createElement(x,u({ref:j},L)),T&&!R&&n.createElement(W.Provider,{value:T},l))}),j=function(n){var e=a(W);if(!e)throw new Error((n?n+" Component":"useRoadview")+" must exist inside Roadview Component!");return e},_=n.forwardRef(function(n,o){var t=n.position,a=n.children,u=n.clickable,c=n.xAnchor,d=n.yAnchor,p=n.zIndex,f=n.altitude,k=n.range,m=n.onCreate,g=j("CustomOverlayRoadview"),v=r(document.createElement("div")),h=l(function(){return"lat"in t?new kakao.maps.LatLng(t.lat,t.lng):new kakao.maps.Viewpoint(t.pan,t.tilt,t.zoom,t.panoId)},[t.lat,t.lng,t.pan,t.tilt,t.zoom,t.panoId]),w=l(function(){var n=new kakao.maps.CustomOverlay({clickable:u,xAnchor:c,yAnchor:d,zIndex:p,position:h,content:v.current});return v.current.style.display="none",n},[u,c,d]);return i(o,function(){return w},[w]),e(function(){if(g)return w.setMap(g),function(){w.setMap(null)}},[w,g]),e(function(){m&&m(w)},[w,m]),e(function(){w.setPosition(h)},[w,h]),e(function(){p&&w.setZIndex(p)},[w,p]),e(function(){f&&w.setAltitude(f)},[w,f]),e(function(){k&&w.setRange(k)},[w,k]),v.current.parentElement&&s.createPortal(a,v.current.parentElement)}),F=n.forwardRef(function(e,o){var t=e.image,r=e.position,i=e.children,a=e.altitude,s=e.clickable,u=e.infoWindowOptions,c=e.onClick,d=e.onDragEnd,p=e.onDragStart,f=e.onMouseOut,k=e.onMouseOver,m=e.onCreate,g=e.opacity,v=e.range,h=e.title,w=e.zIndex,y=j("RoadviewMarker"),C=l(function(){var n,e,o,r,i,a,l,s,u,c,d,p;return t&&new kakao.maps.MarkerImage(t.src,new kakao.maps.Size(t.size.width,t.size.height),{alt:null==(n=t.options)?void 0:n.alt,coords:null==(e=t.options)?void 0:e.coords,offset:(null==(o=t.options)?void 0:o.offset)&&new kakao.maps.Point(null==(r=t.options)?void 0:r.offset.x,null==(i=t.options)?void 0:i.offset.y),shape:null==(a=t.options)?void 0:a.shape,spriteOrigin:(null==(l=t.options)?void 0:l.spriteOrigin)&&new kakao.maps.Point(null==(s=t.options)?void 0:s.spriteOrigin.x,null==(u=t.options)?void 0:u.spriteOrigin.y),spriteSize:(null==(c=t.options)?void 0:c.spriteSize)&&new kakao.maps.Size(null==(d=t.options)?void 0:d.spriteSize.width,null==(p=t.options)?void 0:p.spriteSize.height)})},[t]),b=l(function(){return"lat"in r?new kakao.maps.LatLng(r.lat,r.lng):"x"in r?new kakao.maps.Coords(r.x,r.y).toLatLng():new kakao.maps.Viewpoint(r.pan,r.tilt,r.zoom,r.panoId)},[r.lat,r.lng,r.x,r.y,r.pan,r.tilt,r.zoom,null==r?void 0:r.panoId]);return n.createElement(I,{map:y,position:b,image:C,altitude:a,clickable:s,infoWindowOptions:u,onClick:c,onDragEnd:d,onDragStart:p,onMouseOut:f,onMouseOver:k,onCreate:m,opacity:g,range:v,title:h,zIndex:w,ref:o},i)}),G=n.forwardRef(function(e,o){var t=e.position,r=e.children,i=e.altitude,a=e.disableAutoPan,s=e.range,u=e.removable,c=e.zIndex,d=e.onCreate,p=j("RoadviewInfoWindow"),f=l(function(){return"lat"in t?new kakao.maps.LatLng(t.lat,t.lng):new kakao.maps.Viewpoint(t.pan,t.tilt,t.zoom,t.panoId)},[t.lat,t.lng,t.pan,t.tilt,t.zoom,t.panoId]);return n.createElement(y,{altitude:i,disableAutoPan:a,range:s,removable:u,zIndex:c,map:p,position:f,onCreate:d,ref:o},r)}),U=n.createContext(void 0);function V(n,o,t){e(function(){n&&t&&n.addListener(o,function(){var e=[].slice.call(arguments);return void 0===e?t(n):t.apply(void 0,[n].concat(e))})},[t,n,o])}var B=n.forwardRef(function(o,t){var r=o.arrowOptions,a=o.circleOptions,s=o.ellipseOptions,u=o.markerOptions,c=o.polygonOptions,d=o.polylineOptions,p=o.rectangleOptions,f=o.drawingMode,k=o.guideTooltip,m=o.onSelect,g=o.onDrawstart,v=o.onDraw,h=o.onDrawend,y=o.onDrawnext,C=o.onCancle,b=o.onRemove,I=o.onStateChanged,O=o.onCreate,M=o.children,L=w("Toolbox"),x=l(function(){if(window.kakao.maps.drawing)return new kakao.maps.drawing.DrawingManager({map:L,drawingMode:f,guideTooltip:k,arrowOptions:r,circleOptions:a,ellipseOptions:s,markerOptions:u,polygonOptions:c,polylineOptions:d,rectangleOptions:p});console.warn("drawing 라이브러리를 별도 로드 해야 사용 가능합니다. `https://apis.map.kakao.com/web/guide/#loadlibrary`")},[]);return i(t,function(){return x},[x]),e(function(){x&&O&&O(x)},[x,O]),V(x,"select",m),V(x,"drawstart",g),V(x,"draw",v),V(x,"drawend",h),V(x,"drawnext",y),V(x,"cancel",C),V(x,"remove",b),V(x,"state_changed",I),x?n.createElement(U.Provider,{value:x},M):null}),q=n.forwardRef(function(n,o){var t=n.position;t=t||kakao.maps.ControlPosition.TOP;var r=w("Toolbox"),s=a(U);if(!s)throw new Error("Toolbox must exist inside DrawingManager Component!`");var u=l(function(){return new kakao.maps.drawing.Toolbox({drawingManager:s})},[s]);return i(o,function(){return u},[u]),e(function(){var n=u.getElement();return r.addControl(n,t),function(){r.removeControl(n)}},[r,u,t]),null}),H=n.forwardRef(function(e,o){var a=e.id,l=void 0===a?"react-kakao-maps-sdk-staticmap-container":a,s=e.style,c=e.className,d=e.center,p=e.marker,k=e.level,m=e.mapTypeId,g=e.onCreate,v=t(),h=v[0],w=v[1],y=r(null);return f(function(){if(window.kakao){var n=y.current;n&&kakao.maps.load(function(){var e=Array.isArray(p)?p.map(function(n){return u({},n,{position:new kakao.maps.LatLng(n.position.lat,n.position.lng)})}):"object"==typeof p&&p.position?u({},p,{position:new kakao.maps.LatLng(p.position.lat,p.position.lng)}):p,o=new kakao.maps.StaticMap(n,{center:new kakao.maps.LatLng(d.lat,d.lng),level:k,mapTypeId:m,marker:e});w(o)})}else console.warn("kakao map javascript api를 먼저 불러와야 합니다. `https://apis.map.kakao.com/web/guide`")},[JSON.stringify(p)]),i(o,function(){return h},[h]),f(function(){h&&h.setCenter(new kakao.maps.LatLng(d.lat,d.lng))},[h,d.lat,d.lng]),f(function(){h&&k&&h.setLevel(k)},[h,k]),f(function(){h&&m&&h.setMapTypeId(m)},[h,m]),f(function(){h&&g&&g(h)},[h,g]),n.createElement("div",{id:l,style:s,className:c,ref:y})}),J=function(n){var e=t({loading:!0,error:void 0}),r=e[0],i=e[1],a=l(function(){return new m(n)},[JSON.stringify(n)]);return o(function(){a.load().then(function(){return i({loading:!1,error:void 0})}).catch(function(n){return i({loading:!1,error:n})})},[a]),r};export{T as AbstractOverlay,E as Circle,L as CustomOverlayMap,_ as CustomOverlayRoadview,B as DrawingManager,D as Ellipse,m as Loader,h as Map,M as MapInfoWindow,O as MapMarker,x as MapTypeControl,z as MapTypeId,b as MarkerClusterer,R as Polygon,P as Polyline,A as Rectangle,N as Roadview,G as RoadviewInfoWindow,F as RoadviewMarker,H as StaticMap,q as Toolbox,S as ZoomControl,J as useInjectKakaoMapApi,w as useMap,j as useRoadview};
//# sourceMappingURL=index.module.js.map
